{"ast":null,"code":"import _classCallCheck from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/src/components/DetailedArticle.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { EmailShareButton, FacebookShareButton, TwitterShareButton, EmailIcon, FacebookIcon, TwitterIcon } from 'react-share';\nimport { FaRegBookmark, FaBookmark } from 'react-icons/fa';\nimport { IoIosArrowDown, IoIosArrowUp } from 'react-icons/io';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport { ToastContainer, toast, cssTransition, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport commentBox from 'commentbox.io';\nimport qs from 'qs';\nimport '../App.css';\n\nvar DetailedArticle = /*#__PURE__*/function (_React$Component) {\n  _inherits(DetailedArticle, _React$Component);\n\n  function DetailedArticle() {\n    var _this;\n\n    _classCallCheck(this, DetailedArticle);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DetailedArticle).call(this));\n\n    _this.componentDidMount = function () {\n      document.getElementsByClassName(\"home\")[0].setAttribute(\"class\", \"nav-link home\");\n      document.getElementsByClassName(\"world\")[0].setAttribute(\"class\", \" nav-link world\");\n      document.getElementsByClassName(\"business\")[0].setAttribute(\"class\", \" nav-link business\");\n      document.getElementsByClassName(\"technology\")[0].setAttribute(\"class\", \" nav-link technology\");\n      document.getElementsByClassName(\"sports\")[0].setAttribute(\"class\", \" nav-link sports\");\n      document.getElementsByClassName(\"politics\")[0].setAttribute(\"class\", \" nav-link politics\");\n      document.getElementsByClassName('bookmark_sign_yes')[0].style.display = \"none\";\n      document.getElementsByClassName('bookmark_sign_no')[0].style.display = \"inline\";\n      document.getElementsByClassName(\"loading\")[0].style.display = \"block\";\n      localStorage.setItem(\"currentTab\", \"detailed_article\");\n      var article_id = _this.props.location.search;\n\n      for (var i = 0; i < 3; i++) {\n        document.getElementsByClassName(\"navitem_not_shown\")[i].style.display = \"none\";\n      }\n\n      console.log(\"will send request to server in detailed_article tab\"); // axios.get(`http://ec2-54-146-190-253.compute-1.amazonaws.com:5000/`)\n\n      axios.get('http://ec2-54-146-190-253.compute-1.amazonaws.com:5000/article' + article_id + '&source=' + localStorage.getItem('source')).then(function (res) {\n        var dataFromServer = res.data;\n\n        if (res.status === 200) {\n          console.log(\"请求已完成\");\n          document.getElementsByClassName(\"loading\")[0].style.display = \"none\";\n          document.getElementsByClassName(\"detailed_article\")[0].style.display = \"block\";\n\n          if (localStorage.getItem(\"favorite-\" + dataFromServer.article_id) == null) {\n            document.getElementsByClassName('detail_bookmark_no')[0].style.display = 'inline';\n            document.getElementsByClassName('detail_bookmark_yes')[0].style.display = 'none';\n          } else {\n            document.getElementsByClassName('detail_bookmark_no')[0].style.display = 'none';\n            document.getElementsByClassName('detail_bookmark_yes')[0].style.display = 'inline';\n          }\n\n          var display_desc = dataFromServer.description;\n          console.log(display_desc.substr(0, _this.find(display_desc)));\n        }\n\n        _this.setState({\n          article: dataFromServer\n        });\n      }).catch(function (error) {\n        _this.setState({\n          err: error.message\n        });\n      });\n      _this.removeCommentBox = commentBox(\"5735653593579520-proj\", {\n        createBoxUrl: function createBoxUrl(boxId, pageLocation) {\n          console.log(boxId);\n          var queryParams = qs.parse(pageLocation.search.replace('?', ''));\n          var relevantParams = {\n            'id': queryParams['id']\n          };\n          pageLocation.search = qs.stringify(relevantParams); // we will now include \"?page_id=5\" in the box URL\n\n          pageLocation.hash = boxId; // creates link to this specific Comment Box on your page\n          // console.log(pageLocation.href);\n          // document.getElementsByClassName(\"commentbox\")[0].setAttribute(\"id\",pageLocation.href);\n          // localStorage.setItem(\"currentId\",pageLocation.search);\n\n          return relevantParams['id']; // return id string\n        }\n      });\n    };\n\n    _this.Zoom = cssTransition({\n      enter: 'zoomIn',\n      exit: 'zoomOut',\n      duration: 750\n    });\n\n    _this.renderToast = function () {\n      if (localStorage.getItem(_this.state.article.article_id) == null) {\n        var message = \"Saving \" + _this.state.article.title;\n        toast(message);\n        localStorage.setItem(\"favorite-\" + _this.state.article.article_id, JSON.stringify(_this.state.article));\n        document.getElementsByClassName('detail_bookmark_no')[0].style.display = 'none';\n        document.getElementsByClassName('detail_bookmark_yes')[0].style.display = 'inline';\n      } else {\n        var _message = \"Removing \" + _this.state.article.title;\n\n        toast(_message);\n        localStorage.removeItem(_this.state.article.article_id);\n        document.getElementsByClassName('detail_bookmark_no')[0].style.display = 'inline';\n        document.getElementsByClassName('detail_bookmark_yes')[0].style.display = 'none';\n      }\n    };\n\n    _this.expand = function () {\n      document.getElementsByClassName(\"detailed_description\")[0].style.maxHeight = \"\";\n    };\n\n    _this.state = {\n      article: '',\n      err: '',\n      favorite: 'false',\n      diaplay_description: ''\n    };\n    localStorage.setItem(\"commentKey\", '5735653593579520-proj');\n    return _this;\n  }\n\n  _createClass(DetailedArticle, [{\n    key: \"find\",\n    value: function find(str) {\n      try {\n        var x = str.indexOf('. ');\n\n        for (var i = 1; i < 4; i++) {\n          x = str.indexOf('. ', x + 1);\n        }\n\n        return x + 1;\n      } catch (e) {\n        return str.length;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.removeCommentBox();\n    }\n  }, {\n    key: \"renderTooltip\",\n    value: function renderTooltip(str) {\n      return React.createElement(Tooltip, {\n        id: \"button-tooltip\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, str);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"detailed_article\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(ToastContainer, {\n        className: \"left\",\n        autoClose: false,\n        position: \"top-center\",\n        closeOnClick: true,\n        draggablePercent: 60,\n        transition: Zoom,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"card detail_card\",\n        onClick: toast.dismiss,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"card-title detail_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, this.state.article.title), React.createElement(\"div\", {\n        className: \"detail_date_share_div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"detail_date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, this.state.article.date), React.createElement(\"span\", {\n        className: \"detail_share\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Facebook\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(FacebookShareButton, {\n        className: \"detail_share_btn\",\n        url: this.state.article.url,\n        hashtag: \"#CSCI_571_NewsApp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(FacebookIcon, {\n        size: 30,\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }))), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Twitter\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(TwitterShareButton, {\n        className: \"detail_share_btn\",\n        url: this.state.article.url,\n        hashtags: [\"CSCI_571_NewsApp\"],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(TwitterIcon, {\n        size: 30,\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }))), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Email\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(EmailShareButton, {\n        className: \"detail_share_btn\",\n        url: this.state.article.url,\n        subject: \"#CSCI_571_NewsApp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(EmailIcon, {\n        size: 30,\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }))), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Bookmark\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(FaRegBookmark, {\n        className: \"detail_bookmark_no\",\n        size: 24,\n        onClick: this.renderToast,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Bookmark\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(FaBookmark, {\n        className: \"detail_bookmark_yes\",\n        size: 24,\n        onClick: this.renderToast,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      })))), React.createElement(\"img\", {\n        src: this.state.article.img,\n        className: \"card-img-top\",\n        alt: \"...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"detailed_description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, this.state.article.description), React.createElement(\"p\", {\n        className: \"trunc_detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"...\")), React.createElement(\"p\", {\n        className: \"arrowP\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(IoIosArrowDown, {\n        className: \"arrow\",\n        onClick: this.expand,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"commentbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return DetailedArticle;\n}(React.Component);\n\nexport default DetailedArticle;","map":{"version":3,"sources":["/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/src/components/DetailedArticle.js"],"names":["React","axios","EmailShareButton","FacebookShareButton","TwitterShareButton","EmailIcon","FacebookIcon","TwitterIcon","FaRegBookmark","FaBookmark","IoIosArrowDown","IoIosArrowUp","OverlayTrigger","Tooltip","ToastContainer","toast","cssTransition","Zoom","commentBox","qs","DetailedArticle","componentDidMount","document","getElementsByClassName","setAttribute","style","display","localStorage","setItem","article_id","props","location","search","i","console","log","get","getItem","then","res","dataFromServer","data","status","display_desc","description","substr","find","setState","article","catch","error","err","message","removeCommentBox","createBoxUrl","boxId","pageLocation","queryParams","parse","replace","relevantParams","stringify","hash","enter","exit","duration","renderToast","state","title","JSON","removeItem","expand","maxHeight","favorite","diaplay_description","str","x","indexOf","e","length","dismiss","date","show","hide","renderTooltip","url","img","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {EmailShareButton,FacebookShareButton,TwitterShareButton,EmailIcon,\n    FacebookIcon,TwitterIcon} from 'react-share';\nimport { FaRegBookmark,FaBookmark } from 'react-icons/fa';\nimport {IoIosArrowDown , IoIosArrowUp} from 'react-icons/io';\nimport {OverlayTrigger, Tooltip} from 'react-bootstrap';\nimport { ToastContainer, toast,cssTransition,Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport commentBox from 'commentbox.io';\nimport qs from 'qs';\n\nimport '../App.css';\n\nclass DetailedArticle extends React.Component {\n    constructor(){\n        super();\n        this.state={\n            article:'',\n            err:'',\n            favorite:'false',\n            diaplay_description:''\n        }\n        localStorage.setItem(\"commentKey\",'5735653593579520-proj');\n    }\n\n    find(str){\n        try{\n            var x=str.indexOf('. ');\n            for(var i=1;i<4;i++){\n                x=str.indexOf('. ',x+1);\n            }\n            return x+1;\n        } catch(e){\n            return str.length;\n        }\n        \n    }\n\n    componentDidMount = () => {\n        \n        document.getElementsByClassName(\"home\")[0].setAttribute(\"class\",\"nav-link home\");\n        document.getElementsByClassName(\"world\")[0].setAttribute(\"class\",\" nav-link world\");\n        document.getElementsByClassName(\"business\")[0].setAttribute(\"class\",\" nav-link business\");\n        document.getElementsByClassName(\"technology\")[0].setAttribute(\"class\",\" nav-link technology\");\n        document.getElementsByClassName(\"sports\")[0].setAttribute(\"class\",\" nav-link sports\");\n        document.getElementsByClassName(\"politics\")[0].setAttribute(\"class\",\" nav-link politics\");\n        document.getElementsByClassName('bookmark_sign_yes')[0].style.display = \"none\";\n        document.getElementsByClassName('bookmark_sign_no')[0].style.display = \"inline\";\n\n        document.getElementsByClassName(\"loading\")[0].style.display = \"block\";\n\n        localStorage.setItem(\"currentTab\",\"detailed_article\");\n        let article_id = this.props.location.search;\n\n        for(let i = 0; i < 3; i++){\n            document.getElementsByClassName(\"navitem_not_shown\")[i].style.display = \"none\";\n        }\n\n        console.log(\"will send request to server in detailed_article tab\");\n        // axios.get(`http://ec2-54-146-190-253.compute-1.amazonaws.com:5000/`)\n        axios.get('http://ec2-54-146-190-253.compute-1.amazonaws.com:5000/article'+article_id + '&source=' + localStorage.getItem('source'))\n        .then(res => {\n          const dataFromServer = res.data;\n\n          if(res.status === 200){\n            console.log(\"请求已完成\");\n            document.getElementsByClassName(\"loading\")[0].style.display = \"none\";\n            document.getElementsByClassName(\"detailed_article\")[0].style.display = \"block\";\n            \n            if(localStorage.getItem(\"favorite-\" + dataFromServer.article_id) == null){\n                document.getElementsByClassName('detail_bookmark_no')[0].style.display = 'inline';\n                document.getElementsByClassName('detail_bookmark_yes')[0].style.display = 'none';\n            } else {\n                document.getElementsByClassName('detail_bookmark_no')[0].style.display = 'none';\n                document.getElementsByClassName('detail_bookmark_yes')[0].style.display = 'inline';\n            }\n\n            let display_desc = dataFromServer.description;\n            console.log(display_desc.substr(0,this.find(display_desc)));\n            \n\n\n\n        }\n          this.setState({ article: dataFromServer });\n        })\n        .catch(error => {\n          this.setState({err:error.message})\n        })\n\n        this.removeCommentBox = commentBox(\"5735653593579520-proj\",{\n            createBoxUrl(boxId, pageLocation) {\n                console.log(boxId);\n                const queryParams = qs.parse(pageLocation.search.replace('?', ''));\n                const relevantParams = {'id': queryParams['id']};\n                pageLocation.search = qs.stringify(relevantParams); // we will now include \"?page_id=5\" in the box URL\n                pageLocation.hash = boxId; // creates link to this specific Comment Box on your page\n                // console.log(pageLocation.href);\n                // document.getElementsByClassName(\"commentbox\")[0].setAttribute(\"id\",pageLocation.href);\n                // localStorage.setItem(\"currentId\",pageLocation.search);\n                return relevantParams['id']; // return id string\n            }\n        });\n\n    }\n\n    componentWillUnmount() {\n        this.removeCommentBox();\n    }\n\n\n    renderTooltip(str) {\n        return (\n          <Tooltip id=\"button-tooltip\">\n            {str}\n          </Tooltip>\n        );\n      }\n\n\n    Zoom = cssTransition({\n        enter: 'zoomIn',\n        exit: 'zoomOut',\n        duration: 750,\n      });\n\n    renderToast  = () => {\n\n        if(localStorage.getItem(this.state.article.article_id) == null){\n            let message = \"Saving \" + this.state.article.title;\n            toast(message);\n            localStorage.setItem(\"favorite-\" + this.state.article.article_id,JSON.stringify(this.state.article));\n            document.getElementsByClassName('detail_bookmark_no')[0].style.display = 'none';\n            document.getElementsByClassName('detail_bookmark_yes')[0].style.display = 'inline';\n        } else {\n            let message = \"Removing \" + this.state.article.title;\n            toast(message);\n            localStorage.removeItem(this.state.article.article_id);\n            document.getElementsByClassName('detail_bookmark_no')[0].style.display = 'inline';\n            document.getElementsByClassName('detail_bookmark_yes')[0].style.display = 'none';\n        }\n    }\n\n    expand = () => {\n        document.getElementsByClassName(\"detailed_description\")[0].style.maxHeight = \"\";\n    }\n\n    render() {\n        return (\n        <div className=\"detailed_article\">\n            <ToastContainer className=\"left\" autoClose={false} position=\"top-center\" closeOnClick={true} draggablePercent={60} transition={Zoom}/>\n\n            <div className=\"card detail_card\" onClick={toast.dismiss}>\n                <p className=\"card-title detail_title\">{this.state.article.title}</p>\n                <div className=\"detail_date_share_div\">\n                    <span className=\"detail_date\">{this.state.article.date}</span>\n                    <span className=\"detail_share\">\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Facebook\")} >\n                        <FacebookShareButton className=\"detail_share_btn\" url={this.state.article.url} hashtag=\"#CSCI_571_NewsApp\">\n                            <FacebookIcon size={30} round={true} /> \n                        </FacebookShareButton>\n                    </OverlayTrigger>\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Twitter\")} >\n                        <TwitterShareButton className=\"detail_share_btn\" url={this.state.article.url} hashtags={[\"CSCI_571_NewsApp\"]}>\n                            <TwitterIcon size={30} round={true} /> \n                        </TwitterShareButton>\n                    </OverlayTrigger>\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Email\")} >\n                        <EmailShareButton className=\"detail_share_btn\" url={this.state.article.url} subject=\"#CSCI_571_NewsApp\">\n                            <EmailIcon size={30} round={true} />\n                        </EmailShareButton>\n                    </OverlayTrigger>\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Bookmark\")} >\n                        <FaRegBookmark className=\"detail_bookmark_no\" size={24} onClick={this.renderToast}/>\n                    </OverlayTrigger>\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Bookmark\")} >\n                        <FaBookmark className=\"detail_bookmark_yes\" size={24} onClick={this.renderToast} />\n                    </OverlayTrigger>\n\n                    </span>\n                </div>\n                <img src={this.state.article.img} className=\"card-img-top\" alt=\"...\" />\n                <div>\n                    <p className=\"detailed_description\">{this.state.article.description}</p>\n                    <p className=\"trunc_detail\">...</p>\n                </div>\n                <p className=\"arrowP\"><IoIosArrowDown className=\"arrow\" onClick={this.expand}/></p>\n            </div>\n\n            <div className=\"commentbox\"></div>\n        </div>\n        )\n    }\n}\n\nexport default DetailedArticle"]},"metadata":{},"sourceType":"module"}
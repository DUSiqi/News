{"ast":null,"code":"import _classCallCheck from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/src/components/DetailedArticle.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { EmailShareButton, FacebookShareButton, TwitterShareButton, EmailIcon, FacebookIcon, TwitterIcon } from 'react-share';\nimport { FaRegBookmark, FaBookmark } from 'react-icons/fa';\nimport { IoIosArrowDown, IoIosArrowUp } from 'react-icons/io';\nimport { OverlayTrigger, Tooltip, Toast } from 'react-bootstrap';\nimport { ToastContainer, toast, cssTransition, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport commentBox from 'commentbox.io';\nimport qs from 'qs';\nimport '../App.css';\n\nvar DetailedArticle = /*#__PURE__*/function (_React$Component) {\n  _inherits(DetailedArticle, _React$Component);\n\n  function DetailedArticle() {\n    var _this;\n\n    _classCallCheck(this, DetailedArticle);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DetailedArticle).call(this));\n\n    _this.componentDidMount = function () {\n      document.getElementsByClassName(\"loading\")[0].style.display = \"block\";\n      localStorage.setItem(\"currentTab\", \"detailed_article\");\n      var article_id = _this.props.location.search;\n\n      for (var i = 0; i < 3; i++) {\n        document.getElementsByClassName(\"navitem_not_shown\")[i].style.display = \"none\";\n      }\n\n      console.log(\"will send request to server in detailed_article tab\"); // axios.get(`http://ec2-54-146-190-253.compute-1.amazonaws.com:5000/`)\n\n      axios.get('http://127.0.0.1:5000/article' + article_id + '&source=' + localStorage.getItem('source')).then(function (res) {\n        var dataFromServer = res.data;\n\n        if (res.status == 200) {\n          console.log(\"请求已完成\");\n          document.getElementsByClassName(\"loading\")[0].style.display = \"none\";\n          document.getElementsByClassName(\"detailed_article\")[0].style.display = \"block\";\n        }\n\n        _this.setState({\n          article: dataFromServer\n        });\n      }).catch(function (error) {\n        _this.setState({\n          err: error.message\n        });\n      });\n      _this.removeCommentBox = commentBox(\"5735653593579520-proj\", {\n        createBoxUrl: function createBoxUrl(boxId, pageLocation) {\n          console.log(boxId);\n          var queryParams = qs.parse(pageLocation.search.replace('?', ''));\n          var relevantParams = {\n            'id': queryParams['id']\n          };\n          pageLocation.search = qs.stringify(relevantParams); // we will now include \"?page_id=5\" in the box URL\n\n          pageLocation.hash = boxId; // creates link to this specific Comment Box on your page\n          // console.log(pageLocation.href);\n          // document.getElementsByClassName(\"commentbox\")[0].setAttribute(\"id\",pageLocation.href);\n          // localStorage.setItem(\"currentId\",pageLocation.search);\n\n          return relevantParams['id']; // return id string\n        }\n      });\n    };\n\n    _this.Zoom = cssTransition({\n      enter: 'zoomIn',\n      exit: 'zoomOut',\n      // default to 750ms, can be omitted\n      duration: 750\n    });\n\n    _this.renderToast = function () {\n      if (_this.state.favorite === \"flase\") {\n        document.getElementsByClassName('detail_bookmark')[0].style.background = 'red';\n      }\n\n      var message = \"Saving \" + _this.state.article.title;\n      toast(message);\n    };\n\n    _this.state = {\n      article: '',\n      err: '',\n      favorite: 'false'\n    };\n    localStorage.setItem(\"commentKey\", '5735653593579520-proj');\n    return _this;\n  }\n\n  _createClass(DetailedArticle, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.removeCommentBox();\n    }\n  }, {\n    key: \"renderTooltip\",\n    value: function renderTooltip(str) {\n      return React.createElement(Tooltip, {\n        id: \"button-tooltip\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, str);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"detailed_article\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(ToastContainer, {\n        className: \"left\",\n        autoClose: false,\n        position: \"top-center\",\n        closeOnClick: \"true\",\n        draggablePercent: 60,\n        transition: Zoom,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"card detail_card\",\n        onclick: toast.dismiss,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"card-title detail_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.state.article.title), React.createElement(\"div\", {\n        className: \"detail_date_share_div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"detail_date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, this.state.article.date), React.createElement(\"span\", {\n        className: \"detail_share\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Facebook\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(FacebookShareButton, {\n        className: \"detail_share_btn\",\n        url: this.state.article.url,\n        hashtag: \"#CSCI_571_NewsApp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(FacebookIcon, {\n        size: 30,\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }))), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Twitter\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(TwitterShareButton, {\n        className: \"detail_share_btn\",\n        url: this.state.article.url,\n        hashtags: [\"CSCI_571_NewsApp\"],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(TwitterIcon, {\n        size: 30,\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }))), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Email\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(EmailShareButton, {\n        className: \"detail_share_btn\",\n        url: this.state.article.url,\n        subject: \"#CSCI_571_NewsApp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(EmailIcon, {\n        size: 30,\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }))), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Bookmark\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(FaRegBookmark, {\n        className: \"detail_bookmark\",\n        size: 24,\n        onClick: this.renderToast,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      })), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        delay: {\n          show: 200,\n          hide: 300\n        },\n        overlay: this.renderTooltip(\"Bookmark\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(FaBookmark, {\n        className: \"detail_bookmark\",\n        size: 24,\n        onClick: this.renderToast,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      })))), React.createElement(\"img\", {\n        src: this.state.article.img,\n        className: \"card-img-top\",\n        alt: \"...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"detailed_description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, this.state.article.description), React.createElement(\"p\", {\n        className: \"arrowP\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(IoIosArrowDown, {\n        className: \"arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"commentbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return DetailedArticle;\n}(React.Component);\n\nexport default DetailedArticle;","map":{"version":3,"sources":["/Users/dusiqi/Desktop/CSCI-571/HWS/hw8/NewsApp/client/src/components/DetailedArticle.js"],"names":["React","axios","EmailShareButton","FacebookShareButton","TwitterShareButton","EmailIcon","FacebookIcon","TwitterIcon","FaRegBookmark","FaBookmark","IoIosArrowDown","IoIosArrowUp","OverlayTrigger","Tooltip","Toast","ToastContainer","toast","cssTransition","Zoom","commentBox","qs","DetailedArticle","componentDidMount","document","getElementsByClassName","style","display","localStorage","setItem","article_id","props","location","search","i","console","log","get","getItem","then","res","dataFromServer","data","status","setState","article","catch","error","err","message","removeCommentBox","createBoxUrl","boxId","pageLocation","queryParams","parse","replace","relevantParams","stringify","hash","enter","exit","duration","renderToast","state","favorite","background","title","str","dismiss","date","show","hide","renderTooltip","url","img","description","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {EmailShareButton,FacebookShareButton,TwitterShareButton,EmailIcon,\n    FacebookIcon,TwitterIcon} from 'react-share';\nimport { FaRegBookmark,FaBookmark } from 'react-icons/fa';\nimport {IoIosArrowDown , IoIosArrowUp} from 'react-icons/io';\nimport {OverlayTrigger, Tooltip, Toast} from 'react-bootstrap';\nimport { ToastContainer, toast,cssTransition,Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport commentBox from 'commentbox.io';\nimport qs from 'qs';\n\nimport '../App.css';\n\nclass DetailedArticle extends React.Component {\n    constructor(){\n        super();\n        this.state={\n            article:'',\n            err:'',\n            favorite:'false'\n        }\n        localStorage.setItem(\"commentKey\",'5735653593579520-proj');\n    }\n\n    componentDidMount = () => {\n        \n        document.getElementsByClassName(\"loading\")[0].style.display = \"block\";\n\n        localStorage.setItem(\"currentTab\",\"detailed_article\");\n        let article_id = this.props.location.search;\n\n        for(let i = 0; i < 3; i++){\n            document.getElementsByClassName(\"navitem_not_shown\")[i].style.display = \"none\";\n        }\n\n        console.log(\"will send request to server in detailed_article tab\");\n        // axios.get(`http://ec2-54-146-190-253.compute-1.amazonaws.com:5000/`)\n        axios.get('http://127.0.0.1:5000/article'+article_id + '&source=' + localStorage.getItem('source'))\n        .then(res => {\n          const dataFromServer = res.data;\n          if(res.status == 200){\n            console.log(\"请求已完成\");\n            document.getElementsByClassName(\"loading\")[0].style.display = \"none\";\n            document.getElementsByClassName(\"detailed_article\")[0].style.display = \"block\";\n          \n        }\n          this.setState({ article: dataFromServer });\n        })\n        .catch(error => {\n          this.setState({err:error.message})\n        })\n\n        this.removeCommentBox = commentBox(\"5735653593579520-proj\",{\n            createBoxUrl(boxId, pageLocation) {\n                console.log(boxId);\n                const queryParams = qs.parse(pageLocation.search.replace('?', ''));\n                const relevantParams = {'id': queryParams['id']};\n                pageLocation.search = qs.stringify(relevantParams); // we will now include \"?page_id=5\" in the box URL\n                pageLocation.hash = boxId; // creates link to this specific Comment Box on your page\n                // console.log(pageLocation.href);\n                // document.getElementsByClassName(\"commentbox\")[0].setAttribute(\"id\",pageLocation.href);\n                // localStorage.setItem(\"currentId\",pageLocation.search);\n                return relevantParams['id']; // return id string\n            }\n        });\n\n    }\n\n    componentWillUnmount() {\n        this.removeCommentBox();\n    }\n\n\n    renderTooltip(str) {\n        return (\n          <Tooltip id=\"button-tooltip\">\n            {str}\n          </Tooltip>\n        );\n      }\n\n\n    Zoom = cssTransition({\n        enter: 'zoomIn',\n        exit: 'zoomOut',\n        // default to 750ms, can be omitted\n        duration: 750,\n      });\n\n    renderToast  = () => {\n\n        if(this.state.favorite === \"flase\"){\n            document.getElementsByClassName('detail_bookmark')[0].style.background = 'red';\n        }\n        let message = \"Saving \" + this.state.article.title;\n        toast(message);\n\n        \n          \n    }\n\n    render() {\n        return (\n        <div className=\"detailed_article\">\n            <ToastContainer className=\"left\" autoClose={false} position=\"top-center\" closeOnClick=\"true\" draggablePercent={60} transition={Zoom}/>\n\n            <div className=\"card detail_card\" onclick={toast.dismiss}>\n                <p className=\"card-title detail_title\">{this.state.article.title}</p>\n                <div className=\"detail_date_share_div\">\n                    <span className=\"detail_date\">{this.state.article.date}</span>\n                    <span className=\"detail_share\">\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Facebook\")} >\n                        <FacebookShareButton className=\"detail_share_btn\" url={this.state.article.url} hashtag=\"#CSCI_571_NewsApp\">\n                            <FacebookIcon size={30} round={true} /> \n                        </FacebookShareButton>\n                    </OverlayTrigger>\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Twitter\")} >\n                        <TwitterShareButton className=\"detail_share_btn\" url={this.state.article.url} hashtags={[\"CSCI_571_NewsApp\"]}>\n                            <TwitterIcon size={30} round={true} /> \n                        </TwitterShareButton>\n                    </OverlayTrigger>\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Email\")} >\n                        <EmailShareButton className=\"detail_share_btn\" url={this.state.article.url} subject=\"#CSCI_571_NewsApp\">\n                            <EmailIcon size={30} round={true} />\n                        </EmailShareButton>\n                    </OverlayTrigger>\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Bookmark\")} >\n                        <FaRegBookmark className=\"detail_bookmark\" size={24} onClick={this.renderToast}/>\n                    </OverlayTrigger>\n                    <OverlayTrigger placement=\"top\" delay={{ show: 200, hide: 300 }} overlay={this.renderTooltip(\"Bookmark\")} >\n                    <FaBookmark className=\"detail_bookmark\" size={24} onClick={this.renderToast} />\n                    </OverlayTrigger>\n\n                    </span>\n                </div>\n                <img src={this.state.article.img} className=\"card-img-top\" alt=\"...\" />\n                <p className=\"detailed_description\">{this.state.article.description}</p>\n                <p className=\"arrowP\"><IoIosArrowDown className=\"arrow\"/></p>\n            </div>\n\n            <div className=\"commentbox\"></div>\n        </div>\n        )\n    }\n}\n\nexport default DetailedArticle"]},"metadata":{},"sourceType":"module"}